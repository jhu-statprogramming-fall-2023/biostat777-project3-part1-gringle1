<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Gives the predicted values for an rpart fit, under
  cross validation, for a set of complexity parameter values."><title>Return Cross-Validated Predictions — xpred.rpart • rpart</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Return Cross-Validated Predictions — xpred.rpart"><meta property="og:description" content="Gives the predicted values for an rpart fit, under
  cross validation, for a set of complexity parameter values."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">rpart</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.1.21</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bethatkinson/rpart/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Return Cross-Validated Predictions</h1>
      
      <div class="d-none name"><code>xpred.rpart.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Gives the predicted values for an <code>rpart</code> fit, under
  cross validation, for a set of complexity parameter values.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">xpred.rpart</span><span class="op">(</span><span class="va">fit</span>, xval <span class="op">=</span> <span class="fl">10</span>, <span class="va">cp</span>, return.all <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>fit</dt>
<dd><p>a object of class <code>"rpart"</code>.</p></dd>

<dt>xval</dt>
<dd><p>number of cross-validation groups.  This may also be an explicit list of
  integers that define the cross-validation groups.</p></dd>

<dt>cp</dt>
<dd><p>the desired list of complexity values.  By default it is taken from the
  <code>cptable</code> component of the fit.</p></dd>

<dt>return.all</dt>
<dd><p>if FALSE return only the first element of the prediction</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A matrix with one row for each observation and one column for each complexity
  value.  If <code>return.all</code> is TRUE and the prediction for each node
  is a vector, then the result will be an array containing all of the
  predictions.  When the response is categorical, for instance, the
  result contains the predicted class followed by the class
  probabilities of the selected terminal node;</p>
<p></p>
<p><code>result[1,,]</code> will be the matrix of predicted classes,</p>
<p></p>
<p><code>result[2,,]</code> the matrix of class 1 probabilities, etc.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Complexity penalties are actually ranges, not values.  If the
  <code>cp</code> values found in the table were \(.36\), \(.28\),
  and \(.13\), for instance, this means that the first row of the
  table holds for all complexity penalties in the range \([.36, 1]\),
  the second row for <code>cp</code> in the range \([.28, .36)\) and
  the third row for \([.13,.28)\).  By default, the geometric mean
  of each interval is used for cross validation.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="rpart.html">rpart</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="rpart.html">rpart</a></span><span class="op">(</span><span class="va">Mileage</span> <span class="op">~</span> <span class="va">Weight</span>, <span class="va">car.test.frame</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">xmat</span> <span class="op">&lt;-</span> <span class="fu">xpred.rpart</span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">xerr</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">xmat</span> <span class="op">-</span> <span class="va">car.test.frame</span><span class="op">$</span><span class="va">Mileage</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">xerr</span>, <span class="fl">2</span>, <span class="va">sum</span><span class="op">)</span>   <span class="co"># cross-validated error estimate</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.79767456 0.28300396 0.04154257 0.01132626 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1403.5494   833.0863   650.3545   650.4207 </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># approx same result as rel. error from printcp(fit)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/apply.html" class="external-link">apply</a></span><span class="op">(</span><span class="va">xerr</span>, <span class="fl">2</span>, <span class="va">sum</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">var</a></span><span class="op">(</span><span class="va">car.test.frame</span><span class="op">$</span><span class="va">Mileage</span><span class="op">)</span> </span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 0.79767456 0.28300396 0.04154257 0.01132626 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   61.13276   36.28576   28.32673   28.32961 </span>
<span class="r-in"><span><span class="fu"><a href="printcp.html">printcp</a></span><span class="op">(</span><span class="va">fit</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Regression tree:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> rpart(formula = Mileage ~ Weight, data = car.test.frame)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variables actually used in tree construction:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] Weight</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Root node error: 1354.6/60 = 22.576</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> n= 60 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         CP nsplit rel error  xerror     xstd</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.595349      0   1.00000 1.03476 0.177149</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.134528      1   0.40465 0.56567 0.104648</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.012828      2   0.27012 0.39762 0.073003</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.010000      3   0.25729 0.40563 0.072597</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Terry Therneau, Beth Atkinson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

